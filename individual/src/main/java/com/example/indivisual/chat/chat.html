<!DOCTYPE html>
<html>
<head>
  <title>Chat Application</title>
  <script src="/webjars/sockjs-client/1.5.0/dist/sockjs.min.js"></script>
  <script src="/webjars/stomp-websocket/2.3.3/dist/stomp.min.js"></script>
</head>
<body>

<script type="text/javascript">
  var stompClient = null;
  var username = null;

  function connect() {
    username = document.getElementById("username").value;

    var socket = new SockJS('/chat');
    stompClient = Stomp.over(socket);

    stompClient.connect({}, function (frame) {
      setConnected(true);
      console.log('Connected: ' + frame);

      stompClient.subscribe('/topic/public', function (chatMessage) {
        showMessage(JSON.parse(chatMessage.body));
      });

      stompClient.send("/app/chat.addUser",
          {},
          JSON.stringify({sender: username, type: 'JOIN'})
      )
    });
  }

  function sendMessage() {
    var messageInput = document.getElementById("message");
    var messageContent = messageInput.value.trim();

    if (messageContent && stompClient) {
      stompClient.send("/app/chat.sendMessage",
          {},
          JSON.stringify({sender: username, content: messageContent, type: 'CHAT'})
      );

      messageInput.value = "";
    }
  }

  function showMessage(chatMessage) {
    var chatBox = document.getElementById("chatBox");
    var messageElement = document.createElement("li");
    var messageText = document.createTextNode(chatMessage.sender + ": " + chatMessage.content);
    messageElement.appendChild(messageText);
    chatBox.appendChild(messageElement);
  }

  function setConnected(connected) {
    document.getElementById("connectButton").disabled = connected;
    document.getElementById("disconnectButton").disabled = !connected;

    if (connected) {
      var chatBox = document.getElementById("chatBox");
      chatBox.innerHTML = "";
    }
  }

</script>

<div>
  <label for="username">Username:</label>
  <input type="text" id="username" name="username"/>
  <button id="connectButton" onclick="connect()">Connect</button>
  <button id="disconnectButton" disabled="disabled" onclick="disconnect()">Disconnect</button>
</div>

<div>
  <ul id="chatBox"></ul>
  <input type="text" id="message" name="message"/>
  <button onclick="sendMessage()">Send</button>
</div>

</body>
</html>

<!--위의 코드에서는 HTML 파일에 SockJS 및 STOMP 클라이언트를 포함시키고, connect(), sendMessage(), showMessage(), setConnected() 함수를 정의합니다. connect() 함수에서는 SockJS 및 STOMP 클라이언트를 초기화하고, /topic/public으로 메시지를-->